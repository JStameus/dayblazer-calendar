function getDaysInMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function getFirstWeekDayInMonth(e){var t=e.getMonth(),e=e.getFullYear();const n=new Date(e,t,1);switch(n.toString().split(" ")[0]){case"Mon":return{weekday:"Monday",index:0};case"Tue":return{weekday:"Tuesday",index:1};case"Wed":return{weekday:"Wednesday",index:2};case"Thu":return{weekday:"Thursday",index:3};case"Fri":return{weekday:"Friday",index:4};case"Sat":return{weekday:"Saturday",index:5};case"Sun":return{weekday:"Sunday",index:6};default:return{weekDay:"UNDEFINED",index:0}}}function getDateString(e,t,n){return`${e=1===e.toString().length?"0"+e:e}-${t=1===t.toString().length?"0"+t:t}-${n}`}function createCalendarDayData(t,n,e=!0){e&&(n=[]);var a=getDaysInMonth(t);for(let e=0;e<a;e++){var r=getDateString(e+1,t.getMonth()+1,t.getFullYear());n.push(new CalendarDay(r))}}function createDayDiv(e,t){const n=document.createElement("h4");n.classList.add("day_date_number"),n.textContent=t;const a=document.createElement("div");return a.className="monthView_day",a.classList.add(e),a.appendChild(n),a}function createCalendarGrid(t,n){const a=new Date;a.setMonth(t.getMonth()-1);var r=getFirstWeekDayInMonth(t),s=getDaysInMonth(a);let i=[];for(let e=1;e<=s;e++)i.push(e);i=i.slice(Math.max(i.length-r.index,0));for(let e=0;e<r.index;e++){var o=getDateString(i[e],a.getMonth()+1,a.getFullYear());const u=createDayDiv("previous",i[e]);u.dataset.date=o,n.appendChild(u)}for(let e=0;e<daysInCurrentMonth;e++){var d=getDateString(e+1,t.getMonth()+1,t.getFullYear());const h=createDayDiv("current",e+1);h.dataset.date=d,n.appendChild(h)}var l=maxGridItems-n.children.length;for(let e=0;e<l;e++){var c=getDateString(e+1,nextMonth.getMonth()+1,nextMonth.getFullYear());const y=createDayDiv("next",e+1);y.dataset.date=c,n.appendChild(y)}n.children[t.getDate()+r.index-1].classList.add("today")}function initCalendar(e,t){var n=getFirstWeekDayInMonth(e);maxGridItems=5<=n.index?42:35,createCalendarGrid(e),createCalendarDayData(e),t.addEventListener("click",e=>{e.target.classList[1]}),initEvents()}class CalendarDay{constructor(e){this.date=e,this.eventList=this.refreshEventList()}updateMenuView(){}refreshEventList(){return globalEventList.filter(e=>e.date.toString().trim()===this.date.toString().trim())}}class CalendarEvent{constructor(e){this.id=e.id,this.name=e.name,this.description=e.description,this.date=e.date,this.startTime=e.startTime,this.endTime=e.endTime,this.type=e.type}}function initEvents(t,e){var n=e.children;for(let e=0;e<n.length;e++){const a=n[e];t.forEach(e=>{e.date===a.dataset.date&&a.appendChild(createEventDiv(e))})}}function createEventDiv(e){const t=document.createElement("p");t.textContent=e.name,t.classList.add("event_preview_name");let n="";switch(e.type){case"event":n="event";break;case"task":n="task";break;case"reminder":n="reminder";break;default:n="default"}t.classList.add(`event_type_${n}`);const a=document.createElement("div");return a.id=`event_${e.id}`,a.classList.add("event_preview"),a.appendChild(t),a}const userData={user:"jstameus",token:"abc123"},requestOptions={method:"GET",mode:"cors",headers:{"Content-Type":"application/json","User-Name":`${userData.user}`,"Board-Token":`${userData.token}`}},BASEURL="http://localhost:3000/api",QUERY="u=jstameus";var userXP={currentXP:200,requiredXP:4e3};const currentDate=new Date,daysInCurrentMonth=getDaysInMonth(currentDate),firstDayOfCurrentMonth=getFirstWeekDayInMonth(currentDate),previousMonth=new Date;previousMonth.setMonth(currentDate.getMonth()-1);const nextMonth=new Date;nextMonth.setMonth(currentDate.getMonth()+1);var maxGridItems=0,globalCalendarDayList=[],globalEventList=[];const dayGrid=document.querySelector("#monthView_dayGrid"),progressBarFill=document.querySelector("#progressBar_fill"),xpDisplay=document.querySelector("#footer_xpDisplay"),dayView=document.querySelector("#day_view_full"),screenBlocker=document.querySelector("#screen_blocker"),rightMenuContent=document.querySelector("#menu_right_content"),closeDayViewButton=document.querySelector("#day_view_button_close");closeDayViewButton.addEventListener("click",()=>{toggleDayView()});const showTodayButton=document.querySelector("#sideMenu_showAgenda");showTodayButton.addEventListener("click",()=>{toggleDayView()});const rightToggleButton=document.querySelector("#menu_right_toggleButton");function initApp(){fetch(`${BASEURL}/${QUERY}`,requestOptions).then(e=>e.json()).then(e=>{e.events&&e.events.forEach(e=>{globalEventList.push(new CalendarEvent(e))}),initCalendar()}).catch(e=>{console.log(`ERROR: ${e}`)}),updateProgressBar()}function updateProgressBar(e,t,n){var a=n.currentXP/n.requiredXP*100;e.style.width=`${a}%`,t.textContent=`${n.currentXP}/${n.requiredXP}`}function toggleElementVisibility(e,t=null,n=200){"none"===e.style.display?(e.style.display="block",t&&(t.style.display="block",t.classList.add("enabled"),t.classList.remove("disabled"))):(e.style.display="none",t&&(t.classList.remove("enabled"),t.classList.add("disabled"),setTimeout(()=>{t.style.display="none"},n)))}rightToggleButton.addEventListener("click",()=>{"none"===rightMenuContent.style.display?(rightMenuContent.style.display="block",rightToggleButton.textContent="-"):(rightMenuContent.style.display="none",rightToggleButton.textContent="+")}),window.addEventListener("DOMContentLoaded",()=>{initApp()});