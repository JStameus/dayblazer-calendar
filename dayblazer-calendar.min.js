const currentDate=new Date,daysInCurrentMonth=getDaysInMonth(currentDate),firstDayOfCurrentMonth=getFirstWeekDayInMonth(currentDate),previousMonth=new Date;previousMonth.setMonth(currentDate.getMonth()-1);const nextMonth=new Date;function getDaysInMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function getFirstWeekDayInMonth(e){var t=e.getMonth(),e=e.getFullYear();const n=new Date(e,t,1);switch(n.toString().split(" ")[0]){case"Mon":return{weekday:"Monday",index:0};case"Tue":return{weekday:"Tuesday",index:1};case"Wed":return{weekday:"Wednesday",index:2};case"Thu":return{weekday:"Thursday",index:3};case"Fri":return{weekday:"Friday",index:4};case"Sat":return{weekday:"Saturday",index:5};case"Sun":return{weekday:"Sunday",index:6};default:return{weekDay:"UNDEFINED",index:0}}}function getDateString(e,t,n){return`${e=1===e.toString().length?"0"+e:e}-${t=1===t.toString().length?"0"+t:t}-${n}`}function createDayDiv(e,t){const n=document.createElement("h4");n.classList.add("day_date_number"),n.textContent=t;const a=document.createElement("div");return a.className="monthView_day",a.classList.add(e),a.appendChild(n),a}function createCalendarGrid(e){var t=getFirstWeekDayInMonth(e),n=getDaysInMonth(previousMonth);let a=[];for(let e=1;e<=n;e++)a.push(e);a=a.slice(Math.max(a.length-t.index,0));for(let e=0;e<t.index;e++){var r=getDateString(a[e],previousMonth.getMonth()+1,previousMonth.getFullYear());const i=createDayDiv("previous",a[e]);i.dataset.date=r,dayGrid.appendChild(i)}for(let e=0;e<daysInCurrentMonth;e++){var o=getDateString(e+1,currentDate.getMonth()+1,currentDate.getFullYear());const c=createDayDiv("current",e+1);c.dataset.date=o,dayGrid.appendChild(c)}var s=maxGridItems-dayGrid.children.length;for(let e=0;e<s;e++){var d=getDateString(e+1,nextMonth.getMonth()+1,nextMonth.getFullYear());const l=createDayDiv("next",e+1);l.dataset.date=d,dayGrid.appendChild(l)}dayGrid.children[e.getDate()+t.index-1].classList.add("today")}function initCalendar(){console.log("Loading Month View"),maxGridItems=5<=firstDayOfCurrentMonth.index?42:35,createCalendarGrid(currentDate),dayGrid.addEventListener("click",e=>{e.target.classList[1],console.log(e.target)}),initEvents()}nextMonth.setMonth(currentDate.getMonth()+1);const dayView=document.querySelector("#day_view_full"),screenBlocker=document.querySelector("#screen_blocker"),closeButton=document.querySelector("#day_view_button_close");closeButton.addEventListener("click",()=>{toggleDayView()});const showTodayButton=document.querySelector("#sideMenu_showAgenda");function toggleDayView(){"none"===dayView.style.display?(dayView.style.display="block",screenBlocker.style.display="block",screenBlocker.classList.add("enabled"),screenBlocker.classList.remove("disabled")):(dayView.style.display="none",screenBlocker.classList.remove("enabled"),screenBlocker.classList.add("disabled"),setTimeout(()=>{screenBlocker.style.display="none"},210))}showTodayButton.addEventListener("click",()=>{toggleDayView()});class CalendarDay{constructor(e,t){this.date=e,this.eventList=t}createMenuView(){const e=document.createElement("div");e.classList.add("day_view_full");const t=document.createElement("h1");t.textContent=date.toString()}}function initEvents(){var t=dayGrid.children;for(let e=0;e<t.length;e++){const n=t[e];eventList.forEach(e=>{e.date===n.dataset.date&&n.appendChild(createEventDiv(e))})}}function createEventDiv(e){const t=document.createElement("p");t.textContent=e.name,t.classList.add("event_preview_name");let n="";switch(e.type){case"event":n="event";break;case"task":n="task";break;case"reminder":n="reminder";break;default:n="default"}t.classList.add(`event_type_${n}`);const a=document.createElement("div");return a.id=`event_${e.id}`,a.classList.add("event_preview"),a.appendChild(t),a}var maxGridItems=0,dayGrid=document.querySelector("#monthView_dayGrid");const rightMenuContent=document.querySelector("#menu_right_content"),rightToggleButton=document.querySelector("#menu_right_toggleButton");rightToggleButton.addEventListener("click",()=>{"none"===rightMenuContent.style.display?(rightMenuContent.style.display="block",rightToggleButton.textContent="-"):(rightMenuContent.style.display="none",rightToggleButton.textContent="+")});const progressBarFill=document.querySelector("#progressBar_fill"),xpDisplay=document.querySelector("#footer_xpDisplay");function updateProgressBar(){var e=currentXP/requiredXP*100;progressBarFill.style.width=`${e}%`,xpDisplay.textContent=`${currentXP}/${requiredXP}`}const userData={user:"jstameus",token:"abc123"},requestOptions={method:"GET",mode:"cors",headers:{"Content-Type":"application/json","User-Name":`${userData.user}`,"Board-Token":`${userData.token}`}},BASEURL="http://localhost:3000/api",QUERY="u=jstameus";var currentXP=200,requiredXP=4e3,eventList=[];function initApp(){fetch(`${BASEURL}/${QUERY}`,requestOptions).then(e=>e.json()).then(e=>{e.events&&e.events.forEach(e=>{eventList.push(e)}),initCalendar()}).catch(e=>{console.log(`ERROR: ${e}`)}),updateProgressBar()}window.addEventListener("DOMContentLoaded",()=>{initApp()});